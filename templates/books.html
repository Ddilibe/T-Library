{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-10 offset-md-1">
            <div class="titlepage">
                <h1 class="text-center">Our Books</h1>
                <p class="text-center">
                    Thermac Library has been a game changer in the reservation of knowledge. From the towering tomes of
                    thermodynamics
                    to the complexities of fluid mechanics, every inch of our collection is dedicated to your
                    engineering journey.
                    We
                    house the classics that laid the foundation and the cutting-edge research that pushes the
                    boundaries. Utilize
                    our
                    online catalog to find and download digital books.
                </p>
            </div>
        </div>
    </div>
    <div class="row center">
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
            <div class="book-box">
                <figure><img src="{{url_for('static', filename='images/a.jpg')}}" alt="img" /></figure>
            </div>
        </div>
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
            <div class="book-box">
                <figure><img src="{{url_for('static', filename='images/c.jpg')}}" alt="img" /></figure>
            </div>
        </div>
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
            <div class="book-box">
                <figure><img src="{{url_for('static', filename='images/b.jpg')}}" alt="img" /></figure>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <h2 class="text-center">Search for Books</h2>
    <form method="post" action="/books">
        <div class="form-group row">
            <label for="search_query" class="col-md-1" style="margin-top: 1%;">SEARCH:</label>
            <input type="text" class="form-control col-md-8" id="search_query" name="search_query" {% if search_query %}
                placeholder="{{search_query}}">
            {% else %}
            placeholder="Enter book name">
            {% endif %}
            <button type="submit" class="btn btn-primary col-md-1">Search</button>
        </div>
    </form>
    <br>
    {% if books %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Level</th>
                <th>Size</th>
                <th>Download Link</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{ book.a }}</td>
                <td>{{ book.b }}</td>
                <td>{{ book.c }}</td>
                <td>{{ book.d }}</td>
                <td><a href="{{ book.e }}" class="btn btn-success">Download</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Pagination -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if page > 1 %}
            <li class="page-item">
                <a class="page-link" href="{{ url_for('books', page=page-1, search_query=search_query) }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {% endif %}

            {% for i in range(1, total_pages + 1) %}
            <li class="page-item {% if page == i %}active{% endif %}">
                <a class="page-link" href="{{ url_for('books', page=i, search_query=search_query) }}">{{ i }}</a>
            </li>
            {% endfor %}

            {% if page < total_pages %} <li class="page-item">
                <a class="page-link" href="{{ url_for('books', page=page+1, search_query=search_query) }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
                </li>
                {% endif %}
        </ul>
    </nav>

    {% else %}
    <p class="text-center">No books found</p>
    {% endif %}
</div>
{% endblock %}